const translations = {
  en: {
    // General
    "Login": "Login",
    "User ID:": "User ID:",
    "Password:": "Password:",
    "Logout": "Logout",
    "Submit": "Submit",
    "Search...": "Search...",
    "Date:": "Date:",
    "coming-soon": "Coming Soon",
    "page-not-found": "Page not found.",
    "error-loading-page": "Error loading page.",
    "This page is under construction.": "This page is under construction.",
    "No data found.": "No data found.",
    "Error loading data.": "Error loading data.",
    "Error loading data: ": "Error loading data: ",
    "Error adding record. Please try again.": "Error adding record. Please try again.",
    "Actions": "Actions",
    "Previous": "Previous",
    "Next": "Next",
    "Page {currentPage} of {totalPages} ({totalItems} items)": "Page {currentPage} of {totalPages} ({totalItems} items)",
    "Could not load shipment details.": "Could not load shipment details.",
    "Please select a file.": "Please select a file.",
    "Data saved successfully!": "Data saved successfully!",
    "Error: ": "Error: ",
    "An unknown error occurred.": "An unknown error occurred.",
    "An error occurred: ": "An error occurred: ",
    "Error processing Excel file: ": "Error processing Excel file: ",
    "File could not be read: ": "File could not be read: ",
    "Time": "Time",
    "Temperature": "Temperature",
    "Check By": "Check By",
    "Remark": "Remark",
    " - Chart": " - Chart",
    "Last Update: ": "Last Update: ",
    "N/A": "N/A",

    // Product Page
    "Search Product...": "Search Product...",
    "Add Product": "Add Product",
    "Action": "Action",
    "Loading products...": "Loading products...",
    "Error loading products: ": "Error loading products: ",
    "Pagination unavailable.": "Pagination unavailable.",
    "No products found": "No products found",
    " for \"{searchTerm}\"": " for \"{searchTerm}\"",
    "Item Code*": "Item Code*",
    "Product Description*": "Product Description*",
    "Chinese Name": "Chinese Name",
    "Packing Size*": "Packing Size*",
    "Example: 250g x 40p": "Example: 250g x 40p",
    "Cancel": "Cancel",
    "Save": "Save",
    "Product added successfully!": "Product added successfully!",
    "Failed to add product: ": "Failed to add product: ",
    "Product Details": "Product Details",
    "Item Code:": "Item Code:",
    "Product Name:": "Product Name:",
    "Chinese Name:": "Chinese Name:",
    "Packing Size:": "Packing Size:",
    "Product not found.": "Product not found.",
    "Failed to view product: ": "Failed to view product: ",
    "Edit Product": "Edit Product",
    "Save Changes": "Save Changes",
    "Product not found for editing.": "Product not found for editing.",
    "Failed to fetch product for editing: ": "Failed to fetch product for editing: ",
    "Are you sure you want to delete this product (ID: {productId})?": "Are you sure you want to delete this product (ID: {productId})?",
    "Product deleted successfully!": "Product deleted successfully!",
    "Failed to delete product: ": "Failed to delete product: ",
    "Product Code, Product Description, and Packing Size are required.": "Product Code, Product Description, and Packing Size are required.",
    "Saving...": "Saving...",
    "Product updated successfully!": "Product updated successfully!",
    "Failed to update product: ": "Failed to update product: ",

    // Sidebar
    "Inventory Management": "Inventory Management",
    "Dashboard": "Dashboard",
    "Product": "Product",
    "Inventory": "Inventory",
    "Transaction": "Transaction",
    "Shipment": "Shipment",
    "Stock Take": "Stock Take",
    "Transfer": "Transfer",
    "Surimi": "Surimi",
    "Packaging Material": "Packaging Material",
    "Order": "Order",
    "CR Temperature": "CR Temperature",
    "Service Record": "Service Record",
    "Public Warehouse": "Public Warehouse",
    "Jordon": "Jordon",
    "Lineage": "Lineage",
    "Sing Long": "Sing Long",

    // Header
    "LI CHUAN FOOD PRODUCTS PTE LTD": "LI CHUAN FOOD PRODUCTS PTE LTD",

    // Dashboard
    "Total Product": "Total Product",
    "Total Stock": "Total Stock",

    // Inventory Page
    "Total": "Total",
    "CR 5": "CR 5",
    "CR 6": "CR 6",
    "JD": "JD",
    "SL": "SL",
    "CR 1": "CR 1",
    "CR 2": "CR 2",
    "B15": "B15",
    "Expand": "Expand",
    "Collapse": "Collapse",
    "Total Quantity": "Total Quantity",

    // Public Warehouse (Jordon, Lineage)
    "Inventory Summary": "Inventory Summary",
    "Stock Out": "Stock Out",
    "Stock In": "Stock In",
    "Report": "Report",
    "Item Code": "Item Code",
    "Product Name": "Product Name",
    "Packing Size": "Packing Size",
    "Pallet Type": "Pallet Type",
    "Location": "Location",
    "Batch No": "Batch No",
    "Lot Number": "Lot Number",
    "LLM Code": "LLM Code",
    "Date Stored": "Date Stored",
    "Container": "Container",
    "Quantity": "Quantity",
    "Pallet": "Pallet",
    "Draw Out Date:": "Draw Out Date:",
    "Draw Out Time:": "Draw Out Time:",
    "Withdraw Quantity": "Withdraw Quantity",
    "Withdraw Pallet": "Withdraw Pallet",
    "Transfer to": "Transfer to",
    "Confirm Date Out": "Confirm Date Out",
    "Mix Pallet": "Mix Pallet",
    "Jordon Drawing Form Reprint": "Jordon Drawing Form Reprint",
    "Order Number:": "Order Number:",
    "Reprint": "Reprint",
    "Jordon Inventory Transaction Report": "Jordon Inventory Transaction Report",
    "Lineage Drawing Form Records": "Lineage Drawing Form Records",

    // Service Record
    "Add Record": "Add Record",
    "Date": "Date",
    "Type": "Type",
    "Equipment": "Equipment",
    "Down Time": "Down Time",
    "Service Company": "Service Company",
    "Service No": "Service No",
    "--Please choose an option--": "--Please choose an option--",
    "Forklift": "Forklift",
    "Truck": "Truck",
    "Coldroom": "Coldroom",
    "Another": "Another",
    "--Please choose a type first--": "--Please choose a type first--",
    "Success!": "Success!",
    "Record added successfully!": "Record added successfully!",

    // Shipment
    "Shipment List": "Shipment List",
    "Shipment Upload": "Shipment Upload",
    "Shipment Allocation": "Shipment Allocation",
    "Upload Shipment File": "Upload Shipment File",
    "Select an Excel file to upload and save to the system.": "Select an Excel file to upload and save to the system.",
    "Choose a file...": "Choose a file...",
    "Upload and Save": "Upload and Save",
    "Uploading, please wait...": "Uploading, please wait...",
    "Allocate Shipment": "Allocate Shipment",
    "Select an Excel file to allocate a shipment.": "Select an Excel file to allocate a shipment.",
    "Update to Inventory": "Update to Inventory",

    // Stock Take
    "Morning": "Morning",
    "Afternoon": "Afternoon",
    "Product Description": "Product Description",
    "Ctn": "Ctn",
    "Pkt": "Pkt",
    "Comparison": "Comparison",

    // Transactions
    "Transaction Date": "Transaction Date",
    "Operator": "Operator",
    "Withdraw Item": "Withdraw Item",
    "Start Date": "Start Date",
    "End Date": "End Date",
    "Warehouse": "Warehouse",
    "Transaction Type": "Transaction Type",
    "All": "All",
    "Inbound": "Inbound",
    "Outbound": "Outbound",
    "Internal Transfer": "Internal Transfer",
    "To Production": "To Production",
    "From Production": "From Production",
    "Adjustment": "Adjustment",
    "Code or Name": "Code or Name",
    "Search": "Search",
    "Reset": "Reset",
    "Loading transactions...": "Loading transactions...",
    "Error loading transactions: ": "Error loading transactions: ",
    "No transactions found.": "No transactions found.",
    "Are you sure you want to delete this transaction? This will also update the inventory.": "Are you sure you want to delete this transaction? This will also update the inventory.",
    "Transaction deleted and inventory updated successfully!": "Transaction deleted and inventory updated successfully!",
    "Failed to delete transaction: ": "Failed to delete transaction: ",

    // Shipment Allocation
    "No data to display for this view.": "No data to display for this view.",
    "Remove": "Remove",
    "Total :": "Total :",
    "Updating inventory...": "Updating inventory...",
    "Row {i + 1} in the {viewName} table is missing an item code.": "Row {i + 1} in the {viewName} table is missing an item code.",
    "Could not find or create product with item code {item.itemCode}.": "Could not find or create product with item code {item.itemCode}.",
    "Inventory updated successfully!": "Inventory updated successfully!",

    // Stock Take
    "Please select a date.": "Please select a date.",
    "No data found for the selected coldroom.": "No data found for the selected coldroom.",
    "No data found for {formattedPreviousDate}": "No data found for {formattedPreviousDate}",
    "No data found for {formattedDate}": "No data found for {formattedDate}",
    "No data found for the morning.": "No data found for the morning.",
    "No data found for the afternoon.": "No data found for the afternoon.",

    // Warehouse
    "Jordon Withdraw Form - {order_number}": "Jordon Withdraw Form - {order_number}",
    "Attn: Jordon Food Industries Pte Ltd": "Attn: Jordon Food Industries Pte Ltd",
    "Collection Time: ": "Collection Time: ",
    "Jordon Withdraw Form": "Jordon Withdraw Form",
    "No.": "No.",
    "Loc": "Loc",
    "Lot No": "Lot No",
    "Plts": "Plts",
    "Qty": "Qty",
    "Regards,": "Regards,",
    "Issue By:": "Issue By:",
    "Collected By:": "Collected By:",
    "Verified By:": "Verified By:",
    "Are you sure you want to delete this Stock Out record?": "Are you sure you want to delete this Stock Out record?",
    "Error updating record: ": "Error updating record: ",
    "Withdraw quantity for {productName} cannot be greater than current quantity.": "Withdraw quantity for {productName} cannot be greater than current quantity.",
    "Withdraw pallet for {productName} cannot be greater than current pallet.": "Withdraw pallet for {productName} cannot be greater than current pallet.",
    "Please fill in all Lot Numbers or Locations.": "Please fill in all Lot Numbers or Locations.",
    "Please fill in the Mix Pallet for rows with 0 pallet.": "Please fill in the Mix Pallet for rows with 0 pallet.",
    "Error fetching existing item.": "Error fetching existing item.",
    "Error submitting records to inventory.": "Error submitting records to inventory.",
    "Error updating transaction for inventory ID {tu.inventory_id}.": "Error updating transaction for inventory ID {tu.inventory_id}.",
    "Records submitted successfully.": "Records submitted successfully.",
    "Clear All Stock Out Records": "Clear All Stock Out Records",
    "Are you sure you want to clear all Stock Out records? This action cannot be undone.": "Are you sure you want to clear all Stock Out records? This action cannot be undone.",
    "Please select an order number.": "Please select an order number.",
    "Could not fetch order details for reprinting.": "Could not fetch order details for reprinting.",
    "Error fetching Lineage records.": "Error fetching Lineage records.",
    "Select Snapshot Date:": "Select Snapshot Date:",
    "Generate Report": "Generate Report",
    "Close": "Close",
    "Export to PDF": "Export to PDF",
    "Export to Excel": "Export to Excel",
    "Generating report...": "Generating report...",
    "Error fetching opening stock.": "Error fetching opening stock.",
    "Error fetching transactions.": "Error fetching transactions.",
    "Report for {month} {year}": "Report for {month} {year}",
    "Opening Stock": "Opening Stock",
    "Closing Stock": "Closing Stock",
    "Total Quantity Balance: ": "Total Quantity Balance: ",
    "Total Pallet Balance: ": "Total Pallet Balance: "
  },
  vi: {},
  zh: {}
};

// Auto-fill blank translations with English values for simplicity
for (const lang in translations) {
  if (lang !== 'en') {
    for (const key in translations.en) {
      if (!translations[lang][key]) {
        translations[lang][key] = "";
      }
    }
  }
}


const setLanguage = (language) => {
    document.documentElement.lang = language;
    localStorage.setItem('language', language);
    updateText();
};

const getLanguage = () => {
    return localStorage.getItem('language') || 'en';
};

const translate = (key) => {
    const language = getLanguage();
    if (translations[language] && translations[language][key]) {
        return translations[language][key] || key;
    }
    return key;
};

const translateWithParams = (key, params) => {
    let translation = translate(key);
    for (const param in params) {
        translation = translation.replace(`{${param}}`, params[param]);
    }
    return translation;
}

const updateText = () => {
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.getAttribute('data-translate');
        if (element.tagName === 'INPUT' && element.placeholder) {
            element.placeholder = translate(key);
        } else {
            element.innerText = translate(key);
        }
    });
};

document.addEventListener('DOMContentLoaded', () => {
    const language = getLanguage();
    setLanguage(language);
});
